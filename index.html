<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<title>é—œæ±8æ—¥ä¹‹æ—… V10.0 (çµæ§‹ä¿®å¾©ç‰ˆ)</title>
<style>
html,body{margin:0;padding:0;width:100%;height:100%;background-color:#FFF0F5;background-image:radial-gradient(#FFD1DC 15%,transparent 16%),radial-gradient(#FFF5BA 15%,transparent 16%);background-size:60px 60px;background-position:0 0,30px 30px;font-family:-apple-system,BlinkMacSystemFont,sans-serif;color:#5D4037;overflow-x:hidden;-webkit-tap-highlight-color:transparent}
#app{display:block;opacity:1;min-height:100vh}
.hide-scrollbar::-webkit-scrollbar{display:none}
.card{background:rgba(255,255,255,0.95);border-radius:20px;box-shadow:0 4px 15px rgba(0,0,0,0.1);border:1px solid rgba(255,255,255,0.8);margin-bottom:15px}
.fab-main{position:fixed;bottom:30px;right:20px;width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:24px;color:white;z-index:50;border:4px solid white;box-shadow:0 5px 15px rgba(0,0,0,0.2);background-color:#ff9eac;transition:transform 0.2s}
.fab-main:active{transform:scale(0.9)}
.boarding-pass{background:white;border-radius:16px;overflow:hidden;box-shadow:0 4px 15px rgba(0,0,0,0.1);border:1px solid #eee;position:relative;margin-bottom:16px}
.boarding-pass::before,.boarding-pass::after{content:'';position:absolute;width:20px;height:20px;background:#FFF0F5;border-radius:50%;top:65%;z-index:10}
.boarding-pass::before{left:-10px}.boarding-pass::after{right:-10px}
.dashed-line{border-top:2px dashed #ddd;margin:15px 0;position:relative}
.sakura-float{position:fixed;top:80px;right:20px;z-index:40;background:rgba(255,255,255,0.95);padding:10px;border-radius:20px;box-shadow:0 10px 30px rgba(255,105,180,0.3);border:2px solid #FFB7B2;text-align:center;width:130px}
.sakura{position:fixed;top:-10px;background:#FFB7B2;border-radius:100% 0 100% 0;opacity:0.6;animation:fall linear infinite;z-index:0;pointer-events:none;width:12px;height:12px}
@keyframes fall{to{transform:translate(15vw,105vh) rotate(360deg)}}
.watercolor-img{width:100%;height:100%;object-fit:cover}
#static-loading{position:fixed;inset:0;background:#FFF0F5;z-index:99999;display:flex;flex-direction:column;align-items:center;justify-content:center}
[v-cloak]{display:none}
</style>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/vue@3.3.4/dist/vue.global.prod.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;500;700;900&display=swap" rel="stylesheet">
<script>
tailwind.config={theme:{extend:{colors:{'chii-pink':'#FFD1DC','chii-deep-pink':'#FF9EAC','chii-blue':'#A2D2FF','chii-yellow':'#FFF5BA','chii-text':'#5D4037'},fontFamily:{sans:['Zen Maru Gothic','sans-serif']},animation:{'bounce-slow':'bounce 3s infinite','wiggle':'wiggle 1s ease-in-out infinite'},keyframes:{wiggle:{'0%,100%':{transform:'rotate(-3deg)'},'50%':{transform:'rotate(3deg)'}}}}}}
</script>
</head>
<body>

<div id="static-loading">
<div style="font-size:50px;animation:bounce-slow 2s infinite">ğŸŒ¸</div>
<div style="margin-top:10px;font-weight:bold;color:#5D4037">V10.0 å•Ÿå‹•ä¸­...</div>
<button onclick="document.getElementById('static-loading').style.display='none'" style="margin-top:20px;border:1px solid #999;padding:5px 15px;border-radius:20px;font-size:12px;color:#666">å¦‚æœå¡ä½è«‹é»æˆ‘</button>
</div>

<div id="sakura-container"></div>

<div id="app" v-cloak>
<div v-if="currentView!=='home'" class="fixed top-0 left-0 right-0 h-16 bg-[#FFF0F5]/95 backdrop-blur z-40 flex items-center justify-between px-4 border-b border-pink-100 shadow-sm transition-all">
<button @click="currentView='home'" class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-pink-400 shadow border border-pink-100"><i class="fa-solid fa-chevron-left"></i></button>
<h1 class="font-bold text-gray-700 flex items-center gap-2"><i class="fa-solid fa-sakura text-pink-400"></i> {{getPageTitle(currentView)}}</h1>
<button @click="showSyncModal=true" class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-blue-400 shadow border border-blue-100"><i class="fa-solid fa-floppy-disk"></i></button>
</div>
<div v-if="currentView!=='home'" class="h-16"></div>

<div v-show="currentView==='home'" class="relative h-screen flex flex-col overflow-hidden">
<div class="absolute inset-0 z-0">
<img :src="homeBannerImg" class="w-full h-full object-cover" style="object-position:center bottom" @error="e=>e.target.src='https://placehold.co/600x900/pink/white?text=Tokyo+Trip'">
<div class="absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-[#FFF0F5]"></div>
</div>
<div class="fixed z-50 bg-white/90 backdrop-blur border-4 border-chii-pink px-4 py-2 rounded-full shadow-lg flex items-center gap-2" style="top:150px;left:20px">
<div class="text-2xl animate-wiggle">ğŸ¹</div>
<div class="flex flex-col"><div class="text-[10px] text-gray-500 font-bold uppercase">Countdown</div><div class="text-xl font-black text-pink-500 leading-none">{{daysUntilTrip}} <span class="text-xs text-gray-400">å¤©</span></div></div>
</div>
<div class="relative z-10 flex-1 flex flex-col justify-between p-6 pt-12 pointer-events-none">
<div class="mt-8 text-white drop-shadow-md text-center pointer-events-auto">
<div class="inline-flex items-center gap-2 bg-pink-500/80 backdrop-blur px-4 py-1 rounded-full text-sm font-bold border border-white/30 mb-3"><i class="fa-solid fa-plane-departure"></i> 2026.03.27 å‡ºç™¼</div>
<h1 class="text-5xl font-black mb-1 tracking-widest text-shadow-lg">é—œæ±ä¹‹æ—…</h1>
<p class="text-lg font-bold opacity-90 tracking-widest text-pink-100">8å¤©7å¤œ</p>
</div>
<div class="bg-white/70 backdrop-blur-xl p-5 rounded-[32px] shadow-xl border border-white/60 mb-16 pointer-events-auto">
<div class="grid grid-cols-3 gap-y-6 gap-x-4">
<div v-for="app in apps" :key="app.id" class="flex flex-col items-center cursor-pointer active:scale-95 transition" @click="currentView=app.view">
<div class="w-14 h-14 rounded-2xl flex items-center justify-center text-2xl text-white shadow-md border-2 border-white" :class="app.bgClass"><i :class="app.icon"></i></div>
<span class="text-xs font-bold mt-2 text-gray-700">{{app.name}}</span>
</div>
</div>
</div>
<div class="absolute bottom-8 left-1/2 -translate-x-1/2 w-11/12 max-w-sm pointer-events-auto">
<div class="bg-white/95 backdrop-blur-lg p-1.5 rounded-full shadow-2xl flex items-center border-2 border-pink-200">
<i class="fa-brands fa-google text-pink-400 ml-4 text-lg"></i>
<input v-model="searchQuery" @keyup.enter="doGoogleSearch" placeholder="æœå°‹æ±äº¬..." class="flex-1 bg-transparent border-none outline-none px-3 text-sm h-10 text-gray-600 font-bold">
<button @click="doGoogleSearch" class="bg-pink-400 text-white w-10 h-10 rounded-full flex items-center justify-center shadow-md active:scale-95"><i class="fa-solid fa-arrow-right"></i></button>
</div>
</div>
</div>
</div>

<div v-if="currentView==='itinerary'" class="px-4 py-2">
<div class="flex overflow-x-auto gap-2 mb-4 pb-1 hide-scrollbar sticky top-16 bg-[#FFF0F5] z-30 py-2">
<button v-for="(d,i) in tripDays" :key="i" @click="selectedDayIndex=i" :class="['px-4 py-2 rounded-full whitespace-nowrap text-sm font-bold border-2 transition',selectedDayIndex===i?'bg-pink-400 text-white border-pink-400':'bg-white text-gray-400 border-white']">{{d.week}}<br><span class="text-[10px] opacity-80">{{d.title}}</span></button>
</div>
<div class="space-y-4">
<div v-for="(item,idx) in currentItinerary" :key="item.id||idx" class="card p-4 relative" @click="editItem(item,idx)">
<div class="absolute left-6 top-0 bottom-0 w-0.5 bg-pink-200"></div>
<div class="flex relative z-10">
<div class="flex flex-col items-center mr-4 pt-1"><div class="w-4 h-4 bg-white border-2 border-pink-400 rounded-full"></div><div class="mt-2 text-gray-300"><i :class="getIconByCategory(item.category)"></i></div></div>
<div class="flex-1">
<div class="flex justify-between mb-1"><span class="text-xs font-bold text-pink-500 bg-pink-50 px-2 py-0.5 rounded">{{item.hours}}</span><div class="flex gap-2"><a :href="getMapLink(item.mapKeyword)" target="_blank" @click.stop class="w-6 h-6 bg-blue-50 text-blue-400 rounded-full flex items-center justify-center"><i class="fa-solid fa-location-arrow text-xs"></i></a><button @click.stop="deleteItem(idx)" class="text-gray-300"><i class="fa-solid fa-trash-can"></i></button></div></div>
<h3 class="font-bold text-gray-800 text-lg leading-tight">{{item.name}}</h3>
<p class="text-sm text-gray-500 mt-1 pl-2 border-l-2 border-gray-100">{{item.note}}</p>
</div>
</div>
</div>
</div>
<button @click="openAddModal" class="fab-main"><i class="fa-solid fa-plus"></i></button>
</div>

<div v-if="currentView==='money'" class="px-4 py-2">
<div class="flex justify-between items-center mb-4 sticky top-16 bg-[#FFF0F5] z-30 py-2">
<div class="flex bg-white rounded-xl p-1 shadow-sm"><button @click="moneyTab='record'" :class="['px-4 py-1.5 rounded-lg text-sm font-bold transition',moneyTab==='record'?'bg-yellow-200 text-yellow-800':'text-gray-400']">è¨˜å¸³</button><button @click="moneyTab='split'" :class="['px-4 py-1.5 rounded-lg text-sm font-bold transition',moneyTab==='split'?'bg-blue-200 text-blue-800':'text-gray-400']">åˆ†å¸³</button></div>
<div class="text-xs font-bold text-gray-500 bg-white px-3 py-1 rounded-full border">åŒ¯ç‡: {{exchangeRate}}</div>
</div>
<div v-if="moneyTab==='record'">
<div v-if="moneyMode==='select'" class="grid grid-cols-2 gap-4">
<div v-for="user in users" :key="user.id" class="card p-4 text-center cursor-pointer hover:-translate-y-1 transition" @click="selectMoneyUser(user.id)">
<div class="w-16 h-16 mx-auto rounded-full bg-gray-100 overflow-hidden mb-2 text-3xl flex items-center justify-center border-4 border-white shadow"><img v-if="user.avatar" :src="user.avatar" class="w-full h-full object-cover"><span v-else>{{user.icon}}</span></div>
<div class="font-bold text-gray-700">{{user.name}}</div>
</div>
</div>
<div v-if="moneyMode==='list'">
<div class="flex justify-between items-center mb-3 px-1"><h3 class="font-bold text-gray-700 flex items-center gap-2">{{getUserById(currentUserId).name}} çš„å¸³æœ¬</h3><button @click="moneyMode='select'" class="text-xs bg-white px-3 py-1 rounded shadow text-gray-500">åˆ‡æ›</button></div>
<div class="card p-4 mb-4 bg-gradient-to-r from-yellow-50 to-orange-50 border-yellow-200 border relative overflow-hidden">
<div class="text-xs text-yellow-600 font-bold mb-1">å€‹äººç¸½æ”¯å‡º (ä¸å«å…¬å¸³)</div><div class="text-2xl font-black text-gray-800">Â¥{{Number(userPersonalTotal).toLocaleString()}}</div>
</div>
<div class="space-y-3"><div v-for="exp in personalExpenses" :key="exp.id" class="card p-3 flex justify-between items-center"><div><div class="font-bold text-gray-800 text-sm">{{exp.name}}</div><div class="text-[10px] text-gray-400">{{exp.date}}</div></div><div class="text-right font-bold text-gray-800">Â¥{{Number(exp.amount).toLocaleString()}}<button @click="deleteExpense(exp.id)" class="text-red-300 ml-2 text-xs"><i class="fa-solid fa-trash"></i></button></div></div></div>
<button @click="openExpenseModal('personal')" class="fab-main bg-yellow-400 text-gray-800 hover:bg-yellow-300"><i class="fa-solid fa-pen"></i></button>
</div>
</div>
<div v-if="moneyTab==='split'">
<div class="card p-4 border-l-4 border-blue-400 mb-4"><h3 class="font-bold mb-2 flex gap-2 items-center"><i class="fa-solid fa-calculator text-blue-400"></i> åˆ†å¸³çµæœ</h3><div v-if="settlements.length===0" class="text-sm text-gray-400 text-center py-4">ç„¡é ˆåˆ†å¸³</div><div v-for="s in settlements" class="flex justify-between text-sm py-2 border-b border-gray-100 last:border-0"><span>{{getUserById(s.from).name}} <i class="fa-solid fa-arrow-right text-xs text-gray-300 mx-1"></i> {{getUserById(s.to).name}}</span><span class="font-bold text-gray-800">Â¥{{s.amount.toLocaleString()}}</span></div></div>
<div class="text-sm font-bold text-gray-500 mb-2 ml-1">å…¬å¸³æ˜ç´°</div>
<div class="space-y-2"><div v-for="exp in groupExpenses" :key="exp.id" class="bg-white p-3 rounded-lg border flex justify-between"><div><div class="font-bold text-sm text-gray-700">{{exp.name}}</div><div class="text-[10px] text-blue-400">{{getUserById(exp.user).name}} å…ˆä»˜</div></div><div class="text-right font-bold text-gray-800">Â¥{{Number(exp.amount).toLocaleString()}}<button @click="deleteExpense(exp.id)" class="text-red-300 ml-2"><i class="fa-solid fa-trash"></i></button></div></div></div>
<button @click="openExpenseModal('group')" class="fab-main bg-blue-400 text-white hover:bg-blue-500"><i class="fa-solid fa-users"></i></button>
</div>
</div>

<div v-if="currentView==='hotel'" class="px-4 py-2">
<div class="flex gap-2 mb-4 justify-center"><button @click="hotelTab='stay'" :class="['px-6 py-2 rounded-full font-bold shadow-sm transition',hotelTab==='stay'?'bg-indigo-400 text-white':'bg-white text-gray-400']">ä½å®¿</button><button @click="hotelTab='flight'" :class="['px-6 py-2 rounded-full font-bold shadow-sm transition',hotelTab==='flight'?'bg-pink-400 text-white':'bg-white text-gray-400']">æ©Ÿç¥¨</button></div>
<div v-if="hotelTab==='stay'" class="space-y-5">
<div v-for="h in hotels" class="card p-5 border border-indigo-100 relative overflow-hidden group hover:shadow-lg transition">
<div class="absolute top-0 right-0 bg-indigo-500 text-white text-xs font-bold px-3 py-1 rounded-bl-xl shadow-sm">{{h.days}}</div>
<h3 class="font-bold text-xl mt-2 text-gray-800 pr-12">{{h.name}}</h3>
<a :href="h.link" target="_blank" class="block mt-4 bg-gradient-to-r from-indigo-500 to-blue-500 text-white py-3 text-center rounded-xl font-bold shadow-md hover:shadow-lg transition active:scale-95"><i class="fa-solid fa-map-location-dot mr-2"></i> é–‹å•Ÿåœ°åœ–å°èˆª</a>
</div>
</div>
<div v-if="hotelTab==='flight'">
<div v-if="flightMode==='select'" class="grid grid-cols-2 gap-4">
<div v-for="user in users" :key="user.id" class="card p-5 text-center cursor-pointer hover:bg-pink-50 transition" @click="currentFlightUser=user.id;flightMode='list'">
<div class="text-4xl mb-2">{{user.icon}}</div><div class="font-bold text-gray-700">{{user.name}} çš„æ©Ÿç¥¨</div>
</div>
</div>
<div v-if="flightMode==='list'">
<div class="flex items-center justify-between mb-4"><h3 class="font-bold text-lg text-gray-700">{{getUserById(currentFlightUser).name}} çš„æ©Ÿç¥¨</h3><button @click="flightMode='select'" class="text-xs bg-white px-3 py-1 rounded-full shadow text-gray-500">åˆ‡æ›</button></div>
<div class="boarding-pass">
<div class="bg-pink-400 px-4 py-2 text-white font-bold text-xs flex justify-between"><span>OUTBOUND å»ç¨‹</span><span>{{getUserById(currentFlightUser).name}}</span></div>
<div class="p-4 flex justify-between items-center">
<div class="text-center"><div class="text-3xl font-black text-gray-800">TPE</div><div class="text-xs text-gray-400">æ¡ƒåœ’</div></div>
<div class="flex-1 px-4 text-center"><i class="fa-solid fa-plane text-pink-300 text-xl"></i><div class="text-[10px] text-gray-400 font-bold">BR198</div></div>
<div class="text-center"><div class="text-3xl font-black text-gray-800">NRT</div><div class="text-xs text-gray-400">æˆç”°</div></div>
</div>
<div class="dashed-line"></div>
<div class="px-4 pb-4 flex justify-between text-sm"><div class="font-bold text-gray-600">08:50 <span class="text-[10px] font-normal text-gray-400">Depart</span></div><div class="font-bold text-gray-600">13:15 <span class="text-[10px] font-normal text-gray-400">Arrive</span></div></div>
</div>
<div class="boarding-pass">
<div class="bg-blue-400 px-4 py-2 text-white font-bold text-xs flex justify-between"><span>INBOUND å›ç¨‹</span><span>{{getUserById(currentFlightUser).name}}</span></div>
<div class="p-4 flex justify-between items-center">
<div class="text-center"><div class="text-3xl font-black text-gray-800">NRT</div><div class="text-xs text-gray-400">æˆç”°</div></div>
<div class="flex-1 px-4 text-center"><i class="fa-solid fa-plane fa-rotate-180 text-blue-300 text-xl"></i><div class="text-[10px] text-gray-400 font-bold">BR197</div></div>
<div class="text-center"><div class="text-3xl font-black text-gray-800">TPE</div><div class="text-xs text-gray-400">æ¡ƒåœ’</div></div>
</div>
<div class="dashed-line"></div>
<div class="px-4 pb-4 flex justify-between text-sm"><div class="font-bold text-gray-600">14:15 <span class="text-[10px] font-normal text-gray-400">Depart</span></div><div class="font-bold text-gray-600">17:05 <span class="text-[10px] font-normal text-gray-400">Arrive</span></div></div>
</div>
</div>
</div>
</div>

<div v-if="currentView==='prep'" class="px-4 py-2">
<div class="flex gap-2 mb-4 overflow-x-auto hide-scrollbar sticky top-16 bg-[#FFF0F5] z-30 py-2">
<button @click="prepTab='common'" :class="['px-4 py-2 rounded-full font-bold whitespace-nowrap shadow-sm transition',prepTab==='common'?'bg-blue-400 text-white':'bg-white text-gray-400']">é€šç”¨</button>
<button @click="prepTab='car'" :class="['px-4 py-2 rounded-full font-bold whitespace-nowrap shadow-sm transition',prepTab==='car'?'bg-green-400 text-white':'bg-white text-gray-400']">è‡ªé§•æ¨è–¦</button>
<button @click="prepTab='list'" :class="['px-4 py-2 rounded-full font-bold whitespace-nowrap shadow-sm transition',prepTab==='list'?'bg-pink-400 text-white':'bg-white text-gray-400']">å€‹äººæ¸…å–®</button>
</div>
<div v-if="prepTab==='common'" class="grid grid-cols-2 gap-3 mb-6">
<a href="https://vjw-lp.digital.go.jp/zh-hant/" target="_blank" class="bg-gradient-to-r from-blue-400 to-indigo-400 text-white p-4 rounded-3xl font-bold text-center shadow-lg active:scale-95 transition"><i class="fa-solid fa-passport text-3xl mb-2"></i><div class="text-sm">VJW å…¥å¢ƒ</div></a>
<button @click="openTicketModal" class="bg-gradient-to-r from-yellow-400 to-orange-400 text-white p-4 rounded-3xl font-bold text-center shadow-lg active:scale-95 transition"><i class="fa-solid fa-ticket text-3xl mb-2"></i><div class="text-sm">ç¥¨åˆ¸ç²¾éˆ</div></button>
</div>
<div v-if="prepTab==='car'" class="card p-5 border-l-4 border-green-400">
<h3 class="font-bold text-lg mb-2 text-gray-700">å¯Œå£«å±±è‡ªé§•æ¨è–¦</h3>
<div class="grid gap-2 text-sm font-bold">
<a href="https://www2.tocoo.jp/cn" target="_blank" class="block bg-gray-50 p-3 rounded-lg text-gray-700 hover:bg-green-50 flex justify-between"><span>ğŸš— ToCoo! æ¯”åƒ¹</span><i class="fa-solid fa-chevron-right text-gray-300"></i></a>
<a href="https://rent.toyota.co.jp/zh-tw/" target="_blank" class="block bg-gray-50 p-3 rounded-lg text-gray-700 hover:bg-green-50 flex justify-between"><span>ğŸš™ Toyota Rent a Car</span><i class="fa-solid fa-chevron-right text-gray-300"></i></a>
<a href="https://cars.tabirai.net/home/" target="_blank" class="block bg-gray-50 p-3 rounded-lg text-gray-700 hover:bg-green-50 flex justify-between"><span>ğŸš• Tabirai ç§Ÿè»Š</span><i class="fa-solid fa-chevron-right text-gray-300"></i></a>
</div>
</div>
<div v-if="prepTab==='list'">
<div v-if="prepMode==='select'" class="grid grid-cols-2 gap-4">
<div v-for="user in users" :key="user.id" class="card p-4 cursor-pointer hover:bg-pink-50 transition" @click="selectPrepUser(user.id)">
<div class="flex justify-between items-center mb-2">
<div class="w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center text-xl overflow-hidden border border-white shadow-sm"><img v-if="user.avatar" :src="user.avatar" class="w-full h-full object-cover"><span v-else>{{user.icon}}</span></div>
<div class="font-bold text-gray-700">{{user.name}}</div>
</div>
<div class="progress-container"><div class="progress-fill bg-pink-400" :style="{width: getProgress(user.id)+'%', backgroundColor: user.bg}"></div></div>
<div class="text-right text-[10px] text-gray-400 mt-1">{{Math.round(getProgress(user.id))}}%</div>
</div>
</div>
<div v-if="prepMode==='list'">
<div class="flex justify-between items-center mb-4 px-1"><h3 class="font-bold text-xl text-gray-700 flex items-center gap-2">{{getUserById(prepUser).name}} çš„æ¸…å–®</h3><button @click="prepMode='select'" class="bg-white px-3 py-1.5 rounded-full shadow text-xs font-bold text-gray-500 border">è¿”å›</button></div>
<div class="card p-5 min-h-[300px] mb-20">
<div v-for="(item,idx) in currentPrepList" :key="idx" class="flex items-center gap-3 py-3 border-b border-dashed border-gray-200"><input type="checkbox" v-model="item.checked" class="w-5 h-5 accent-pink-400 rounded cursor-pointer"><input v-model="item.text" class="flex-1 text-sm bg-transparent outline-none font-medium" :class="{'line-through text-gray-300':item.checked}"><button @click="currentPrepList.splice(idx,1)" class="ml-auto text-gray-300 p-2"><i class="fa-solid fa-xmark"></i></button></div>
<button @click="addPrepItem" class="w-full mt-6 py-3 border-2 border-dashed border-gray-200 rounded-xl text-gray-400 font-bold hover:bg-gray-50 transition text-sm">+ æ–°å¢é …ç›®</button>
</div>
</div>
</div>
</div>

<div v-if="currentView==='weather'" class="px-4 py-2 relative">
<div class="sakura-float">
<div class="text-[10px] text-gray-400 font-bold mb-1">2026 æ«»èŠ±é æ¸¬</div>
<div class="text-2xl mb-1">ğŸŒ¸</div>
<div class="text-sm font-bold text-pink-500 mb-2">{{sakuraStatus}}</div>
<div class="flex flex-col gap-1 mt-2">
<a href="https://n-kishou.com/corp/news-contents/sakura/" target="_blank" class="text-[10px] bg-pink-100 text-pink-600 px-2 py-1 rounded-full font-bold hover:bg-pink-200">æ°£è±¡æ ªå¼æœƒç¤¾</a>
<a href="https://weathernews.jp/s/sakura/" target="_blank" class="text-[10px] bg-blue-100 text-blue-600 px-2 py-1 rounded-full font-bold hover:bg-blue-200">Weathernews</a>
</div>
</div>
<div class="space-y-4 pt-4">
<div v-for="w in [{t:'æ±äº¬',d:tokyoWeather},{t:'éŒå€‰',d:kamakuraWeather},{t:'å¯Œå£«å±±',d:fujiWeather}]" class="card p-5 border-l-4 border-sky-400">
<div class="flex justify-between items-center mb-2"><div><div class="font-bold text-gray-500 text-xs">{{w.t}}</div><div class="text-4xl font-black text-gray-800 tracking-tighter">{{w.d.temp}}Â°</div></div><div class="text-4xl drop-shadow-sm">{{w.d.icon}}</div></div>
<div class="mt-2 bg-sky-50 p-2 rounded-lg text-xs text-gray-600 border border-sky-100 flex gap-2 items-center"><div class="text-lg">ğŸ‘˜</div><div><span class="font-bold text-sky-600">ç©¿æ­å»ºè­°ï¼š</span>{{getClothingAdvice(w.d.temp)}}</div></div>
</div>
</div>
</div>

<div v-if="['food','shopping','photo'].includes(currentView)" class="px-4 py-2">
<div v-if="currentView==='food'" class="flex gap-2 mb-4 overflow-x-auto hide-scrollbar justify-center sticky top-16 bg-[#FFF0F5] z-30 py-2"><button v-for="loc in ['Tokyo','Kamakura','Fuji']" @click="foodLoc=loc" :class="['px-6 py-2 rounded-full text-sm font-bold shadow-sm transition whitespace-nowrap',foodLoc===loc?'bg-orange-400 text-white':'bg-white text-gray-400 border border-gray-100']">{{{'Tokyo':'æ±äº¬','Kamakura':'éŒå€‰','Fuji':'å¯Œå£«å±±'}[loc]}}</button></div>
<div v-if="currentView==='shopping'" class="flex gap-2 mb-4 overflow-x-auto hide-scrollbar justify-center"><button v-for="cat in ['wish','cosme','ldk','souvenir']" @click="shopCat=cat" :class="['px-5 py-2 rounded-full text-sm font-bold shadow-sm transition whitespace-nowrap',shopCat===cat?'bg-pink-400 text-white':'bg-white text-gray-400 border border-gray-100']">{{{'wish':'æˆ‘çš„é¡˜æœ›','cosme':'è—¥å¦','ldk':'LDK','souvenir':'ä¼´æ‰‹ç¦®'}[cat]}}</button></div>
<div v-if="currentView==='photo'" class="flex gap-2 mb-4 overflow-x-auto hide-scrollbar justify-center"><button v-for="area in ['Tokyo','Kamakura','Fuji']" @click="photoArea=area" :class="['px-6 py-2 rounded-full text-sm font-bold shadow-sm transition whitespace-nowrap',photoArea===area?'bg-rose-400 text-white':'bg-white text-gray-400 border border-gray-100']">{{{'Tokyo':'æ±äº¬','Kamakura':'éŒå€‰','Fuji':'å¯Œå£«å±±'}[area]}}</button></div>
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
<div v-for="(item,idx) in getCurrentList()" :key="item.id||idx" class="card overflow-hidden hover:shadow-lg transition group">
<div class="h-56 relative bg-gray-100 cursor-pointer" @click="openImage(item.img)">
<img :src="item.img" class="w-full h-full object-cover watercolor-img" @error="handleImgError($event,currentView,item.name)">
<div class="watercolor-paper-texture"></div>
<div class="absolute top-2 right-2 flex gap-2">
<button @click.stop="editCommonItem(item,idx)" class="w-8 h-8 bg-white/90 rounded-full flex items-center justify-center shadow text-blue-400"><i class="fa-solid fa-pen"></i></button>
<button @click.stop="deleteCommonItem(idx)" class="w-8 h-8 bg-white/90 rounded-full flex items-center justify-center shadow text-red-400"><i class="fa-solid fa-trash"></i></button>
</div>
</div>
<div class="p-5">
<h3 class="font-bold text-xl text-gray-800 mb-1">{{item.name}}</h3>
<p class="text-sm text-gray-500 mb-4 leading-relaxed">{{item.desc}}</p>
<a v-if="item.link" :href="item.link" target="_blank" class="block text-center bg-blue-500 text-white py-2.5 rounded-xl font-bold text-sm shadow-sm hover:bg-blue-600 transition">é€£çµ / å°èˆª</a>
</div>
</div>
</div>
<button @click="openAddCommonModal(currentView)" class="fab-main hover:scale-110"><i class="fa-solid fa-plus"></i></button>
</div>

<div v-if="currentView==='japanese'" class="px-4 py-2">
<button @click="openCamera" class="w-full bg-gradient-to-r from-emerald-500 to-green-400 rounded-3xl p-6 text-white text-center mb-6 shadow-xl relative overflow-hidden active:scale-95 transition group"><i class="fa-solid fa-camera text-8xl absolute -right-6 -bottom-6 opacity-20 rotate-12"></i><h3 class="font-bold text-2xl mb-2">ğŸ“¸ é–‹å•Ÿæ‡¸æµ®é¡é ­</h3><p class="text-sm opacity-90 font-medium">ç›´æ¥æ‹ç…§ç¿»è­¯</p></button>
<div class="space-y-3">
<div v-for="(phrase,idx) in japanesePhrases" :key="idx" @click="speak(phrase.jp)" class="card p-5 flex items-center justify-between cursor-pointer active:scale-95 transition border-l-[6px] border-emerald-400">
<div><div class="font-bold text-xl text-gray-800 mb-1">{{phrase.jp}}</div><div class="text-sm text-gray-500 font-medium">{{phrase.tw}}</div></div>
<div class="w-12 h-12 bg-emerald-50 rounded-full flex items-center justify-center text-emerald-500 text-xl shadow-inner"><i class="fa-solid fa-volume-high"></i></div>
<button @click.stop="japanesePhrases.splice(idx,1)" class="absolute top-2 right-2 text-gray-300 hover:text-red-400 p-2"><i class="fa-solid fa-trash"></i></button>
</div>
</div>
<button @click="openAddCommonModal('jp')" class="fab-main bg-emerald-500 hover:bg-emerald-600"><i class="fa-solid fa-plus"></i></button>
</div>

<div v-if="showLightbox" class="fixed inset-0 z-[100] bg-white/95 backdrop-blur flex items-center justify-center p-4 animate-fade-in" @click="showLightbox=false"><img :src="currentZoomImg" class="max-w-full max-h-[80vh] rounded-2xl shadow-2xl border-4 border-white" @click.stop><button class="absolute top-6 right-6 text-gray-400 hover:text-gray-800 text-4xl"><i class="fa-solid fa-circle-xmark"></i></button></div>
<div v-if="showCamera" class="fixed inset-0 bg-black z-[100] flex flex-col"><video ref="videoElement" autoplay playsinline class="w-full h-full object-cover"></video><button @click="closeCamera" class="absolute top-6 right-6 bg-black/40 text-white w-12 h-12 rounded-full flex items-center justify-center z-50 backdrop-blur"><i class="fa-solid fa-xmark"></i></button></div>
<input type="file" ref="avatarInput" accept="image/*" class="hidden" @change="processAvatarUpload">
<input type="file" ref="commonImageInput" accept="image/*" class="hidden" @change="processCommonImageUpload">
<div v-if="showModal" class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm"><div class="bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl"><h3 class="font-bold text-lg mb-4 text-center">{{isEditing?'ç·¨è¼¯':'æ–°å¢'}}</h3><input v-model="editForm.name" placeholder="åç¨±" class="w-full p-3 bg-gray-50 rounded-xl mb-3 outline-none border"><div class="flex gap-2 mb-3"><input v-model="editForm.hours" placeholder="æ™‚é–“" class="w-1/3 p-3 bg-gray-50 rounded-xl outline-none border"><select v-model="editForm.category" class="flex-1 p-3 bg-gray-50 rounded-xl outline-none border"><option value="Sightseeing">æ™¯é»</option><option value="Food">ç¾é£Ÿ</option><option value="Shopping">è³¼ç‰©</option><option value="Transport">äº¤é€š</option></select></div><input v-model="editForm.mapKeyword" placeholder="åœ°åœ–é—œéµå­—" class="w-full p-3 bg-gray-50 rounded-xl mb-3 outline-none border"><textarea v-model="editForm.note" class="w-full p-3 bg-gray-50 rounded-xl h-24 mb-4 outline-none border resize-none" placeholder="å‚™è¨»"></textarea><div class="flex gap-3"><button @click="showModal=false" class="flex-1 bg-gray-100 py-3 rounded-xl font-bold text-gray-500">å–æ¶ˆ</button><button @click="saveItem" class="flex-1 bg-pink-400 text-white py-3 rounded-xl font-bold shadow-md">å„²å­˜</button></div></div></div>
<div v-if="showCommonModal" class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm"><div class="bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl"><h3 class="font-bold text-lg mb-4 text-center">{{isEditing?'ç·¨è¼¯':'æ–°å¢'}}</h3><input v-model="newCommon.text1" placeholder="åç¨±" class="w-full p-3 bg-gray-50 rounded-xl mb-3 outline-none border"><textarea v-if="commonType!=='jp'" v-model="newCommon.text2" class="w-full p-3 bg-gray-50 rounded-xl h-24 mb-3 outline-none border resize-none" placeholder="æè¿°"></textarea><div class="flex items-center gap-3 mb-4"><div class="w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center border overflow-hidden"><img v-if="newCommon.text3" :src="newCommon.text3" class="w-full h-full object-cover"><i v-else class="fa-solid fa-image text-gray-300"></i></div><button @click="$refs.commonImageInput.click()" class="text-xs bg-blue-50 text-blue-500 px-3 py-2 rounded-lg font-bold border border-blue-100">ä¸Šå‚³/æ›´æ›åœ–ç‰‡</button></div><div class="flex gap-3"><button @click="showCommonModal=false" class="flex-1 bg-gray-100 py-3 rounded-xl font-bold text-gray-500">å–æ¶ˆ</button><button @click="saveCommonItem" class="flex-1 bg-blue-400 text-white py-3 rounded-xl font-bold shadow-md">å„²å­˜</button></div></div></div>
<div v-if="showExpenseModal" class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm"><div class="bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl"><h3 class="font-bold text-lg mb-4 text-center">è¨˜å¸³</h3><input v-model="newExpense.name" placeholder="é …ç›®" class="w-full p-3 bg-gray-50 rounded-xl mb-3 outline-none border"><div class="flex gap-2 mb-3"><input type="number" v-model="newExpense.amount" placeholder="é‡‘é¡" class="flex-1 p-3 bg-gray-50 rounded-xl outline-none border"><select v-model="newExpense.currency" class="w-24 p-3 bg-gray-50 rounded-xl outline-none border font-bold text-gray-600"><option value="JPY">JPY</option><option value="TWD">TWD</option></select></div><div class="mb-3"><label class="text-xs text-gray-400 font-bold ml-1">{{expenseType==='group'?'èª°å…ˆå¢Šä»˜?':'èª°èŠ±çš„?'}}</label><div class="flex gap-2 mt-1 overflow-x-auto pb-1"><button v-for="u in users" :key="u.id" @click="currentUserId=u.id" :class="['px-3 py-1 rounded-full text-xs font-bold border transition',currentUserId===u.id?'bg-yellow-100 border-yellow-300 text-yellow-700':'bg-white border-gray-200 text-gray-400']">{{u.name}}</button></div></div><div class="flex gap-2 justify-center mb-6"><button v-for="c in ['é£Ÿ','è¡£','ä½','è¡Œ','æ¨‚']" :key="c" @click="newExpense.category=c" :class="['w-10 h-10 rounded-full font-bold transition',newExpense.category==c?'bg-chii-yellow text-gray-800 shadow-md scale-110':'bg-gray-100 text-gray-400']">{{c}}</button></div><div class="flex gap-3"><button @click="showExpenseModal=false" class="flex-1 bg-gray-100 py-3 rounded-xl font-bold text-gray-500">å–æ¶ˆ</button><button @click="addExpense" class="flex-1 bg-yellow-400 text-gray-800 py-3 rounded-xl font-bold shadow-md">å„²å­˜</button></div></div></div>
<div v-if="showTicketModal" class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm"><div class="bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl h-[60vh] flex flex-col"><div class="flex justify-between items-center mb-4"><h3 class="font-bold text-xl text-gray-700">ç¥¨åˆ¸ç²¾éˆ</h3><button @click="showTicketModal=false" class="text-gray-300"><i class="fa-solid fa-xmark text-xl"></i></button></div><div class="flex-1 overflow-y-auto space-y-3"><div v-for="ticket in suggestedTickets" :key="ticket.name" class="border rounded-xl p-3 border-orange-200 bg-orange-50"><h4 class="font-bold text-gray-800">{{ticket.name}}</h4><p class="text-xs text-gray-600 mt-1">{{ticket.reason}}</p><a :href="ticket.link" target="_blank" class="block text-center bg-white border border-orange-200 text-orange-500 text-xs font-bold py-1 mt-2 rounded-full">å‰å¾€è³¼è²·</a></div></div></div></div>
<div v-if="showSyncModal" class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm"><div class="bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl relative"><button @click="showSyncModal=false" class="absolute top-4 right-4 text-gray-300"><i class="fa-solid fa-xmark text-xl"></i></button><h3 class="font-bold text-xl mb-2 text-center text-chii-text">ğŸ“‚ æª”æ¡ˆå­˜å–</h3><p class="text-xs text-gray-400 text-center mb-6">å„²å­˜ HTML å¯ä¿ç•™æ‰€æœ‰åœ–ç‰‡èˆ‡è³‡æ–™</p><button @click="saveAsHtml" class="w-full py-3 bg-gradient-to-r from-pink-400 to-rose-400 text-white rounded-xl font-bold mb-3 flex items-center justify-center gap-2 shadow-md active:scale-95 transition"><i class="fa-solid fa-file-code"></i> å„²å­˜ç‚ºç¶²é æª” (HTML)</button><hr class="border-gray-100 my-3"><button @click="downloadBackup" class="w-full py-3 bg-blue-50 text-blue-600 rounded-xl font-bold mb-3 flex items-center justify-center gap-2"><i class="fa-solid fa-download"></i> åƒ…å‚™ä»½è³‡æ–™ (JSON)</button><label class="w-full py-3 bg-gray-50 text-gray-600 rounded-xl font-bold flex items-center justify-center gap-2 cursor-pointer border border-gray-200"><i class="fa-solid fa-upload"></i> è®€å–è³‡æ–™ (JSON)<input type="file" @change="loadBackup" accept=".json" class="hidden"></label><div v-if="syncMsg" class="text-center text-xs mt-3 font-bold text-green-500">{{syncMsg}}</div></div></div>
</div>
<script>
const sc = document.getElementById('sakura-container');
for(let i=0; i<20; i++){ const e=document.createElement('div'); e.className='sakura'; e.style.left=Math.random()*100+'vw'; e.style.animationDuration=Math.random()*3+4+'s'; sc.appendChild(e); }
setTimeout(() => { document.getElementById('loading-screen').style.display='none'; }, 800);
</script>
<script>
const { createApp, ref, computed, onMounted, watch } = Vue;
createApp({
setup() {
const currentView = ref('home');
const isMounted = ref(false);
const showModal = ref(false);
const showCommonModal = ref(false);
const showExpenseModal = ref(false);
const showSyncModal = ref(false);
const showTicketModal = ref(false);
const homeBannerImg = ref('2026.tokyo.jpg');
const searchQuery = ref('');
const tripDays = [{week:'Day 1',title:'æŠµé”'},{week:'Day 2',title:'æ·ºè‰'},{week:'Day 3',title:'æ²³å£æ¹–'},{week:'Day 4',title:'å±±ä¸­æ¹–'},{week:'Day 5',title:'æ–°å®¿'},{week:'Day 6',title:'éŒå€‰'},{week:'Day 7',title:'æ¾€è°·'},{week:'Day 8',title:'è¿”ç¨‹'}];
const selectedDayIndex = ref(0);
const defaultItinerary = [
[{id:101,category:'Flight',name:'06:40 æ¡ƒåœ’èµ·é£›',hours:'06:40',mapKeyword:'æ¡ƒåœ’æ©Ÿå ´',note:'ææ—©2å°æ™‚æŠµé”æ©Ÿå ´'},{id:102,category:'Flight',name:'10:40 æŠµé”æˆç”°æ©Ÿå ´',hours:'10:40',mapKeyword:'æˆç”°æ©Ÿå ´',note:'é ˜å–è¡Œæã€è³¼è²·äº¤é€šå¡'},{id:103,category:'Sightseeing',name:'æ™´ç©ºå¡” Tokyo Skytree',hours:'ä¸‹åˆ',mapKeyword:'Tokyo Skytree',note:'å¯é€› Solamachi å•†åº—è¡—'},{id:104,category:'Food',name:'æ™šé¤ï¼šéŒ¦ç³¸ç”ºå‘¨é­',hours:'æ™šä¸Š',mapKeyword:'éŒ¦ç³¸ç”ºç¾é£Ÿ',note:'ä¾ç…§ç•¶ä¸‹å¿ƒæƒ…é¸æ“‡'}],
[{id:201,category:'Sightseeing',name:'æ·ºè‰å¯º',hours:'ä¸Šåˆ',mapKeyword:'æ·ºè‰å¯º',note:'é›·é–€ã€ä»²è¦‹ä¸–é€š'},{id:202,category:'Food',name:'åˆé¤ï¼šæ·ºè‰å¯ºå‘¨é­',hours:'ä¸­åˆ',mapKeyword:'æ·ºè‰åˆé¤',note:'æ¨è–¦ç‚¸è‚‰é¤…ã€é°»é­šé£¯'},{id:203,category:'Sightseeing',name:'å°ç¶²ç¥ç¤¾',hours:'ä¸‹åˆ',mapKeyword:'å°ç¶²ç¥ç¤¾',note:'å¼·é‹å„é™¤'},{id:204,category:'Sightseeing',name:'ä¸Šé‡æ©è³œå…¬åœ’',hours:'ä¸‹åˆ',mapKeyword:'ä¸Šé‡æ©è³œå…¬åœ’',note:'æ•£æ­¥ã€æ˜Ÿå·´å…‹'},{id:205,category:'Shopping',name:'ç§‹è‘‰åŸ æˆ– æ±äº¬ä¸€ç•ªè¡—',hours:'æ™šä¸Š',mapKeyword:'æ±äº¬ç«™ä¸€ç•ªè¡—',note:'å‹•æ¼«å‘¨é‚Š / ä¼´æ‰‹ç¦®'}],
[{id:301,category:'Transport',name:'å‰å¾€å¯Œå£«å±± (ç§Ÿè»Š)',hours:'ä¸Šåˆ',mapKeyword:'æ²³å£æ¹–ç§Ÿè»Š',note:'å¾éŒ¦ç³¸ç”ºå‡ºç™¼ï¼Œé–‹å§‹3å¤©2å¤œè‡ªé§•'},{id:302,category:'Sightseeing',name:'æ²³å£æ¹–è‡ªç„¶ç”Ÿæ´»é¤¨',hours:'ä¸‹åˆ',mapKeyword:'æ²³å£æ¹–è‡ªç„¶ç”Ÿæ´»é¤¨'},{id:303,category:'Sightseeing',name:'æ–°å€‰å¯Œå£«æ·ºé–“ç¥ç¤¾',hours:'ä¸‹åˆ',mapKeyword:'æ–°å€‰å¯Œå£«æ·ºé–“ç¥ç¤¾'},{id:304,category:'Sightseeing',name:'é‡‘é³¥å±… & æœ¬ç”ºå•†åº—è¡—',hours:'å‚æ™š',mapKeyword:'å¯Œå£«å‰ç”°æœ¬ç”ºé€šã‚Š'},{id:305,category:'Food',name:'æ™šé¤ï¼šè‡ªç‚Šæˆ–å•†åº—è¡—',hours:'æ™šä¸Š',mapKeyword:'å¯Œå£«å‰ç”°æ™šé¤'}],
[{id:401,category:'Sightseeing',name:'å¹³é‡ä¹‹æ¿±æ—¥å‡º',hours:'æ¸…æ™¨',mapKeyword:'å¹³é‡ä¹‹æ¿±',note:'çµ•ç¾é€†å¯Œå£«'},{id:402,category:'Sightseeing',name:'é•·æ± è¦ªæ°´å…¬åœ’ & ç™½é³¥æ¿±',hours:'ä¸Šåˆ',mapKeyword:'é•·æ± è¦ªæ°´å…¬åœ’',note:'é¤µå¤©éµã€æ‹ç¾ç…§'},{id:403,category:'Transport',name:'ç§Ÿè‡ªè¡Œè»Šç’°æ¹–',hours:'ä¸Šåˆ',mapKeyword:'å±±ä¸­æ¹–è‡ªè¡Œè»Šç§Ÿå€Ÿ',note:'äº«å—æ¹–ç•”å¾®é¢¨'},{id:404,category:'Food',name:'åˆé¤ï¼šå±±ä¸­æ¹–é¤å»³',hours:'ä¸­åˆ',mapKeyword:'å±±ä¸­æ¹–ç¾é£Ÿ'},{id:405,category:'Sightseeing',name:'KABA æ°´é™¸å·´å£«',hours:'ä¸‹åˆ',mapKeyword:'å±±ä¸­æ¹–KABA'},{id:406,category:'Shopping',name:'Ogino è¶…å¸‚æ¡è²·',hours:'å‚æ™š',mapKeyword:'Ogino æ²³å£æ¹–åº—',note:'æ™šé¤é£Ÿæ'}],
[{id:501,category:'Sightseeing',name:'é‡‘é³¥å±… (è£œæ‹)',hours:'æ—©ä¸Š',mapKeyword:'é‡‘é³¥å±…',note:'è‹¥å‰å…©å¤©æ²’æ‹åˆ°'},{id:502,category:'Sightseeing',name:'æ²³å£æ¹–çºœè»Š & çµ•æ™¯é¦éŸ†',hours:'æ—©ä¸Š',mapKeyword:'æ²³å£æ¹–å¯Œå£«å±±å…¨æ™¯çºœè»Š'},{id:503,category:'Shopping',name:'Fujisan Shokupan',hours:'ä¸­åˆ',mapKeyword:'Fujisan Shokupan',note:'è³¼è²·å¯Œå£«å±±åå¸'},{id:504,category:'Transport',name:'æ­ä¹˜å¯Œå£«å›éŠè¿”æ–°å®¿',hours:'ä¸‹åˆ',mapKeyword:'æ²³å£æ¹–ç«™',note:'é‚„è»Šå¾Œæ­è»Š'},{id:505,category:'Shopping',name:'æ± è¢‹å¤ªé™½åŸ',hours:'æ™šä¸Š',mapKeyword:'æ± è¢‹å¤ªé™½åŸ',note:'è³¼ç‰©ã€æ™šé¤'}],
[{id:601,category:'Transport',name:'æ–°å®¿å‰å¾€è—¤æ¾¤',hours:'ä¸Šåˆ',mapKeyword:'è—¤æ¾¤ç«™',note:'æ±Ÿä¹‹é›»ä¸€æ—¥éŠé–‹å§‹'},{id:602,category:'Sightseeing',name:'æ±Ÿä¹‹å³¶',hours:'ä¸Šåˆ',mapKeyword:'æ±Ÿä¹‹å³¶',note:'åƒé“ã€ç¥ç¤¾'},{id:603,category:'Sightseeing',name:'éŒå€‰é«˜æ ¡å‰',hours:'ä¸­åˆ',mapKeyword:'éŒå€‰é«˜æ ¡å‰é§…',note:'çŒç±ƒé«˜æ‰‹å¹³äº¤é“'},{id:604,category:'Sightseeing',name:'ä¸ƒé‡Œæ¿± & åˆé¤',hours:'ä¸‹åˆ',mapKeyword:'ä¸ƒé‡Œæ¿±',note:'Bills æˆ–å‘¨é‚Šé¤å»³'},{id:605,category:'Sightseeing',name:'éŒå€‰',hours:'å‚æ™š',mapKeyword:'éŒå€‰å°ç”ºé€š',note:'é€›è¡—ã€å¤§ä½›'}],
[{id:701,category:'Sightseeing',name:'æ±äº¬éµå¡”',hours:'ä¸Šåˆ',mapKeyword:'èŠå…¬åœ’',note:'æ‹ç…§é»ï¼šèŠå…¬åœ’'},{id:702,category:'Sightseeing',name:'å…­æœ¬æœ¨ / éº»å¸ƒå°',hours:'ä¸­åˆ',mapKeyword:'éº»å¸ƒå°ä¹‹ä¸˜',note:'åˆé¤åœ¨æ­¤è§£æ±º'},{id:703,category:'Sightseeing',name:'å‰å¾€æ¾€è°·',hours:'ä¸‹åˆ',mapKeyword:'æ¾€è°·',note:'é€›è¡—'},{id:704,category:'Sightseeing',name:'SHIBUYA SKY',hours:'å‚æ™š',mapKeyword:'SHIBUYA SKY',note:'éœ€é ç´„å¤•é™½æ™‚æ®µ'},{id:705,category:'Shopping',name:'æ¾€è°·æœ€å¾Œæ¡è²·',hours:'æ™šä¸Š',mapKeyword:'æ¾€è°·åå­—è·¯å£',note:'è—¥å¦ã€å”å‰è¨¶å¾·'}],
[{id:801,category:'Sightseeing',name:'è‡ªç”±è¡Œç¨‹',hours:'ç™½å¤©',mapKeyword:'',note:'è£œè²¨æˆ–ä¼‘æ¯'},{id:802,category:'Flight',name:'20:40 æˆç”°èµ·é£›',hours:'20:40',mapKeyword:'æˆç”°æ©Ÿå ´',note:'ææ—©æŠµé”æ©Ÿå ´'},{id:803,category:'Flight',name:'23:20 æŠµé”æ¡ƒåœ’',hours:'23:20',mapKeyword:'æ¡ƒåœ’æ©Ÿå ´',note:'å¹³å®‰å›å®¶'}]
];
const itineraryData = ref(defaultItinerary);
const users = ref([{id:1,name:'å‰ä¼Š',bg:'#FFD1DC',icon:'ğŸ¹',list:['è­·ç…§']},{id:2,name:'å°å…«',bg:'#A2D2FF',icon:'ğŸ±',list:['è­·ç…§']},{id:3,name:'å…”å…”',bg:'#FFF5BA',icon:'ğŸ°',list:['è­·ç…§']},{id:4,name:'å°æ¡ƒ',bg:'#FFB7B2',icon:'ğŸ‘',list:['è­·ç…§']}]);
const expenses = ref([]);
const daysUntilTrip = ref(100);
const editForm = ref({});
const newCommon = ref({text1:'',text2:'',text3:''});
const newExpense = ref({name:'',amount:'',currency:'JPY'});
const isEditing = ref(false);
const editIndex = ref(-1);
const commonType = ref('');
const expenseType = ref('personal');
const currentUserId = ref(1);
const moneyTab = ref('record');
const moneyMode = ref('select');
const prepTab = ref('common');
const prepMode = ref('select');
const prepUser = ref(1);
const hotelTab = ref('stay');
const flightMode = ref('select');
const currentFlightUser = ref(1);
const foodLoc = ref('Tokyo');
const shopCat = ref('wish');
const photoArea = ref('Tokyo');
const tokyoWeather = ref({temp:'--',icon:'â˜ï¸'});
const kamakuraWeather = ref({temp:'--',icon:'â˜ï¸'});
const fujiWeather = ref({temp:'--',icon:'â˜ï¸'});
const sakuraStatus = ref('é æ¸¬ä¸­');
const exchangeRate = ref(0.22);
const getMapLink = (k) => 'https://www.google.com/maps/search/?api=1&query=$' + encodeURIComponent(k);
const shoppingList = ref({
'wish':[],
'cosme':[{id:1,name:'Kate æ€ªç¸å”‡è†',desc:'è³£åˆ°ç¼ºè²¨çš„ç¥ç´šå”‡è†ï¼',img:'./images/kate.jpg',link:getMapLink('Kate Monster Lip')},{id:2,name:'Tirtir æ°£å¢Šç²‰é¤…',desc:'æ—¥æœ¬å¥³ç”Ÿäººæ‰‹ä¸€é¡†çš„ç´…ç›’æ°£å¢Šã€‚',img:'./images/tirtir.jpg',link:getMapLink('Tirtir Cushion')}],
'ldk':[{id:3,name:'Lululun é¢è†œ',desc:'LDK è©•æ¸¬å¸¸å‹è»ï¼',img:'./images/lululun.jpg',link:getMapLink('Lululun Mask')},{id:4,name:'Melano CC ç²¾è¯',desc:'å¹³åƒ¹ç¾ç™½ç¥å™¨ï¼',img:'./images/cc.jpg',link:getMapLink('Melano CC')}],
'souvenir':[{id:5,name:'NY Perfect Cheese',desc:'æ±äº¬è»Šç«™æ’éšŠååº—ï¼',img:'./images/ny.jpg',link:getMapLink('NY Perfect Cheese')}]
});
const foodList = ref({
'Tokyo':[{id:1,name:'AFURI é˜¿å¤«åˆ©æ‹‰éºµ',desc:'å¿…åƒçš„æŸšå­é¹½æ‹‰éºµï¼',img:'./images/afuri-ramen.jpg',link:'https://afuri.com/'},{id:2,name:'HARBS æ°´æœåƒå±¤è›‹ç³•',desc:'æ±äº¬ç”œé»ç•Œçš„å¤¢å¹»é€¸å“ï¼',img:'./images/harbs-fruit-crepe.jpg',link:'https://www.harbs.co.jp/'},{id:3,name:'æ·ºè‰ç‚¸è‚‰é¤…',desc:'ä»²è¦‹ä¸–é€šå¿…åƒæ•£æ­¥ç¾é£Ÿã€‚',img:'./images/menchi.jpg',link:getMapLink('æ·ºè‰ç‚¸è‚‰é¤…')},{id:4,name:'ç‰›ã‹ã¤ã‚‚ã¨æ‘',desc:'äººæ°£ç‚¸ç‰›æ’å®šé£Ÿã€‚',img:'./images/beef.jpg',link:getMapLink('ç‰›ã‹ã¤ã‚‚ã¨æ‘')}],
'Kamakura':[{id:5,name:'Bills ä¸ƒé‡Œæ¿±',desc:'ä¸–ç•Œç¬¬ä¸€å¥½åƒçš„æ—©é¤ã€‚',img:'./images/bills.jpg',link:getMapLink('Bills ä¸ƒé‡Œæ¿±')},{id:6,name:'è±å³¶å±‹ é´¿å­é¤…ä¹¾',desc:'éŒå€‰æœ€å…·ä»£è¡¨æ€§ä¼´æ‰‹ç¦®ã€‚',img:'./images/dove.jpg',link:getMapLink('è±å³¶å±‹ æœ¬åº—')}],
'Fuji':[{id:7,name:'Houtou Fudou é¤ºé£¥éºµ',desc:'æ²³å£æ¹–å¿…åƒé„‰åœŸæ–™ç†ã€‚',img:'./images/houtou.jpg',link:getMapLink('Houtou Fudou æ±æˆ€è·¯åº—')},{id:8,name:'Fujisan Shokupan',desc:'è¶…å¯æ„›çš„å¯Œå£«å±±é€ å‹åå¸ï¼',img:'./images/toast.jpg',link:getMapLink('Fujisan Shokupan')}]
});
const photoSpots = ref({
'Tokyo':[{id:1,name:'SHIBUYA SKY',desc:'æ±äº¬æœ€ç¾é«˜ç©ºå±•æœ›å°ï¼',img:'./images/sky.jpg',link:getMapLink('SHIBUYA SKY')},{id:2,name:'æ±äº¬éµå¡” (èŠå…¬åœ’)',desc:'èƒ½æ‹åˆ°æ±äº¬éµå¡”å…¨è²Œçš„æœ€ä½³å…¬åœ’ã€‚',img:'./images/tower.jpg',link:getMapLink('èŠå…¬åœ’')}],
'Kamakura':[{id:3,name:'éŒå€‰é«˜æ ¡å‰',desc:'çŒç±ƒé«˜æ‰‹ç¶“å…¸å ´æ™¯å†ç¾ï¼',img:'./images/slamdunk.jpg',link:getMapLink('éŒå€‰é«˜æ ¡å‰ç«™')},{id:4,name:'é•·è°·å¯º',desc:'ç¹¡çƒèŠ±å­£çš„çµ•ç¾æ™¯é»ã€‚',img:'./images/hasedera.jpg',link:getMapLink('é•·è°·å¯º')}],
'Fuji':[{id:5,name:'æ–°å€‰å±±æ·ºé–“å…¬åœ’',desc:'æ˜ä¿¡ç‰‡ç­‰ç´šçš„çµ•æ™¯ï¼',img:'./images/pagoda.jpg',link:getMapLink('æ–°å€‰å±±æ·ºé–“å…¬åœ’')},{id:6,name:'æ²³å£æ¹– Lawson',desc:'ä¾¿åˆ©å•†åº—èƒŒå¾Œå°±æ˜¯å·¨å¤§çš„å¯Œå£«å±±ï¼',img:'./images/lawson.jpg',link:getMapLink('Lawson æ²³å£æ¹–ç«™å‰åº—')}]
});
const japanesePhrases = ref([{jp:'ã™ã¿ã¾ã›ã‚“',tw:'ä¸å¥½æ„æ€'},{jp:'ã“ã‚Œã‚’ãŠé¡˜ã„ã—ã¾ã™',tw:'æˆ‘è¦é€™å€‹'},{jp:'ãŠä¼šè¨ˆãŠé¡˜ã„ã—ã¾ã™',tw:'çµå¸³'}]);
const currentDayItinerary = computed(() => itineraryData.value[selectedDayIndex.value] || []);
const getUserById = (id) => users.value.find(u => u.id === id) || users.value[0];
const currentPrepList = computed(() => { const u = getUserById(prepUser.value); return u.list ? u.list.map(i => typeof i === 'string' ? {text:i, checked:false} : i) : []; });
const getCurrentList = () => { if(currentView.value==='food') return foodList.value[foodLoc.value]||[]; if(currentView.value==='shopping') return shoppingList.value[shopCat.value]||[]; if(currentView.value==='photo') return photoSpots.value[photoArea.value]||[]; return []; };
const personalExpenses = computed(() => expenses.value.filter(e => e.user === currentUserId.value && e.type === 'personal'));
const groupExpenses = computed(() => expenses.value.filter(e => e.type === 'group'));
const userPersonalTotal = computed(() => personalExpenses.value.reduce((s,e) => s + Number(e.amount), 0));
const settlements = computed(() => {
const bal = {}; users.value.forEach(u=>bal[u.id]=0);
groupExpenses.value.forEach(e=>{ const amt = Number(e.amount); if(bal[e.user]!=undefined) bal[e.user]+=amt; });
const total = Object.values(bal).reduce((a,b)=>a+b,0); const avg = total / users.value.length;
const net = {}; users.value.forEach(u=>net[u.id]=bal[u.id]-avg);
const debt=[], cred=[]; for(let uid in net) { if(net[uid]<-1) debt.push({u:uid,a:-net[uid]}); else if(net[uid]>1) cred.push({u:uid,a:net[uid]}); }
const res=[]; let i=0,j=0; while(i<debt.length && j<cred.length){ let amt = Math.min(debt[i].a, cred[j].a); if(amt>0) res.push({from:debt[i].u, to:cred[j].u, amount:Math.round(amt)}); debt[i].a-=amt; cred[j].a-=amt; if(debt[i].a<1) i++; if(cred[j].a<1) j++; } return res;
});
const countdownPos = ref({x:20, y:150});
const startDrag = (e) => {
const el = e.target.closest('.fixed'); if(!el) return;
const touch = e.touches ? e.touches[0] : e;
const offsetX = touch.clientX - countdownPos.value.x;
const offsetY = touch.clientY - countdownPos.value.y;
const move = (ev) => { const t = ev.touches ? ev.touches[0] : ev; countdownPos.value.x = t.clientX - offsetX; countdownPos.value.y = t.clientY - offsetY; };
const stop = () => { document.removeEventListener('touchmove', move); document.removeEventListener('mousemove', move); };
document.addEventListener('touchmove', move); document.addEventListener('mousemove', move); document.addEventListener('touchend', stop); document.addEventListener('mouseup', stop);
};
const changeView = (v) => currentView.value = v;
const getPageTitle = (v) => ({'itinerary':'è¡Œç¨‹è¡¨','money':'å°è²¡åº«','home':'é¦–é ','prep':'è¡Œå‰æº–å‚™','weather':'å¤©æ°£é€±å ±','food':'åƒåƒå–å–','shopping':'å¿«æ¨‚Shop','photo':'ç¶²ç¾æ‰“å¡','hotel':'ä½å®¿èˆ‡æ©Ÿç¥¨','japanese':'å³æ™‚æ•‘å‘½'}[v] || v);
const getIconByCategory = (c) => ({'Flight':'fa-plane','Sightseeing':'fa-camera','Food':'fa-utensils','Shopping':'fa-bag-shopping','Transport':'fa-train'}[c]||'fa-star');
const handleImgError = (e) => e.target.src = 'https://placehold.co/600x400/FFD1DC/555?text=Image';
const doGoogleSearch = () => { if(searchQuery.value) window.open(getMapLink(searchQuery.value)); };
const openAddModal = () => { isEditing.value=false; editForm.value={category:'Sightseeing'}; showModal.value=true; };
const editItem = (item, idx) => { isEditing.value=true; editIndex.value=idx; editForm.value={...item}; showModal.value=true; };
const saveItem = () => { if(!itineraryData.value[selectedDayIndex.value]) itineraryData.value[selectedDayIndex.value] = []; if(isEditing.value) Object.assign(itineraryData.value[selectedDayIndex.value][editIndex.value], editForm.value); else itineraryData.value[selectedDayIndex.value].push({...editForm.value, id:Date.now()}); showModal.value=false; };
const deleteItem = (idx) => { if(confirm('åˆªé™¤?')) itineraryData.value[selectedDayIndex.value].splice(idx,1); };
const openAddCommonModal = (t) => { commonType.value=t; isEditing.value=false; newCommon.value={text1:'', text2:'', text3:''}; showCommonModal.value=true; };
const editCommonItem = (item, idx) => { commonType.value=currentView.value; isEditing.value=true; editIndex.value=idx; newCommon.value={text1:item.name, text2:item.desc, text3:item.img}; showCommonModal.value=true; };
const deleteCommonItem = (idx) => { if(confirm('åˆªé™¤?')) getCurrentList().splice(idx,1); };
const saveCommonItem = () => {
const list = getCurrentList();
const item = { name: newCommon.value.text1, desc: newCommon.value.text2, img: newCommon.value.text3 || 'https://placehold.co/400x400/FFD1DC/555?text='+newCommon.value.text1, link: getMapLink(newCommon.value.text1) };
if(isEditing.value) Object.assign(list[editIndex.value], item); else list.push(item);
showCommonModal.value=false;
};
const openExpenseModal = (t) => { expenseType.value=t; newExpense.value={amount:'', currency:'JPY'}; showExpenseModal.value=true; };
const addExpense = () => { expenses.value.push({...newExpense.value, id:Date.now(), user:currentUserId.value, type:expenseType.value, date:new Date().toLocaleDateString()}); showExpenseModal.value=false; };
const deleteExpense = (id) => { expenses.value = expenses.value.filter(e=>e.id!==id); };
const selectMoneyUser = (id) => { currentUserId.value=id; moneyMode.value='list'; };
const selectPrepUser = (id) => { prepUser.value=id; prepMode.value='list'; };
const addPrepItem = () => { const t = prompt('é …ç›®'); if(t) getUserById(prepUser.value).list.push({text:t, checked:false}); };
const getProgress = (uid) => { const l = getUserById(uid).list; if(!l||!l.length) return 0; return Math.round((l.filter(i=>i.checked).length/l.length)*100); };
const getClothingAdvice = (t) => (t<15?'å¤§è¡£+åœå·¾':t<20?'è–„å¤–å¥—':'çŸ­è¢–');
const processCommonImageUpload = (e) => { const reader = new FileReader(); reader.onload = (ev) => newCommon.value.text3 = ev.target.result; reader.readAsDataURL(e.target.files[0]); };
const processAvatarUpload = (e) => { const reader = new FileReader(); reader.onload = (ev) => getUserById(currentUserId.value).avatar = ev.target.result; reader.readAsDataURL(e.target.files[0]); };
const openCamera = async () => { showCamera.value = true; try { const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } }); if(videoElement.value) videoElement.value.srcObject = stream; } catch(e) { alert('ç›¸æ©Ÿå•Ÿå‹•å¤±æ•—(éœ€HTTPS)'); showCamera.value=false; } };
const closeCamera = () => { if(videoElement.value && videoElement.value.srcObject) videoElement.value.srcObject.getTracks().forEach(t => t.stop()); showCamera.value = false; };
const openImage = (src) => { currentZoomImg.value = src; showLightbox.value = true; };
const speak = (text) => { const u = new SpeechSynthesisUtterance(text); u.lang = 'ja-JP'; window.speechSynthesis.speak(u); };
const saveAsHtml = () => {
const state = { itinerary: itineraryData.value, users: users.value, expenses: expenses.value, shop: shoppingList.value, food: foodList.value, photo: photoSpots.value, jp: japanesePhrases.value };
let html = document.documentElement.outerHTML;
html = html.replace('const itineraryData = ref(defaultItinerary);', 'const itineraryData = ref('+JSON.stringify(state.itinerary)+');')
.replace('const users = ref([{id: 1', 'const users = ref('+JSON.stringify(state.users)+'); //')
.replace('const expenses = ref([]);', 'const expenses = ref('+JSON.stringify(state.expenses)+');');
const blob = new Blob([html], {type: 'text/html'}); const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = '2026_Tokyo_V10.0.html'; a.click();
};
const downloadBackup = () => { const data = JSON.stringify({itinerary:itineraryData.value, users:users.value}); const blob = new Blob([data], {type: 'application/json'}); const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'backup.json'; a.click(); };
const loadBackup = (e) => { const r = new FileReader(); r.onload = (ev) => { try{ const d=JSON.parse(ev.target.result); itineraryData.value=d.itinerary; users.value=d.users; alert('è®€å–æˆåŠŸ'); showSyncModal.value=false; }catch(err){alert('æ ¼å¼éŒ¯èª¤');} }; r.readAsText(e.target.files[0]); };
const getW = async (lat,lon,refVal) => { try{ const r=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,weather_code&timezone=Asia%2FTokyo`); const d=await r.json(); refVal.value={temp:d.current.temperature_2m, icon:d.current.weather_code<=3?'ğŸŒ¤ï¸':'â˜ï¸'}; }catch(e){} };
const fetchRate = async () => { try { const r=await fetch('https://api.exchangerate-api.com/v4/latest/JPY'); const d=await r.json(); if(d.rates.TWD) exchangeRate.value = (1/d.rates.TWD).toFixed(3); } catch(e){} };
onMounted(() => {
const STORAGE_KEY = 'v10_clean_key';
const s = localStorage.getItem(STORAGE_KEY);
if(s) { try { const d=JSON.parse(s); itineraryData.value=d.itinerary||defaultItinerary; expenses.value=d.expenses||[]; shoppingList.value=d.shop||shoppingList.value; foodList.value=d.food||foodList.value; photoSpots.value=d.photo||photoSpots.value; } catch(e){} }
else {
const basic = ['è­·ç…§', 'æ—¥å¹£', 'ä¿¡ç”¨å¡', 'SIMå¡'];
const drive = JSON.stringify(itineraryData.value).includes('ç§Ÿè»Š') ? ['é§•ç…§/è­¯æœ¬'] : [];
users.value.forEach((u, i) => u.list = [...basic, ...(i===0?drive:[])].map(t => ({text:t, checked:false})));
}
getW(35.6895, 139.6917, tokyoWeather); getW(35.3192, 139.5467, kamakuraWeather); getW(35.3606, 138.7274, fujiWeather); fetchRate();
daysUntilTrip.value = Math.ceil((new Date('2026-03-27') - new Date()) / (86400000));
});
watch([itineraryData, expenses, shoppingList, foodList, photoSpots], () => {
localStorage.setItem('v10_clean_key', JSON.stringify({itinerary: itineraryData.value, expenses: expenses.value, shop: shoppingList.value, food: foodList.value, photo: photoSpots.value}));
}, {deep: true});
const apps = [
{id:1,name:'è¡Œç¨‹è¡¨',icon:'fa-solid fa-map-location-dot',bgClass:'bg-pink-400',view:'itinerary'},
{id:2,name:'å°è²¡åº«',icon:'fa-solid fa-sack-dollar',bgClass:'bg-yellow-400',view:'money'},
{id:3,name:'ä½å®¿æ©Ÿç¥¨',icon:'fa-solid fa-plane-arrival',bgClass:'bg-indigo-400',view:'hotel'},
{id:4,name:'è¡Œå‰æº–å‚™',icon:'fa-solid fa-suitcase-rolling',bgClass:'bg-blue-400',view:'prep'},
{id:5,name:'åƒåƒå–å–',icon:'fa-solid fa-utensils',bgClass:'bg-orange-400',view:'food'},
{id:6,name:'å¿«æ¨‚Shop',icon:'fa-solid fa-bag-shopping',bgClass:'bg-purple-400',view:'shopping'},
{id:7,name:'å¤©æ°£é€±å ±',icon:'fa-solid fa-cloud-sun',bgClass:'bg-sky-400',view:'weather'},
{id:8,name:'ç¶²ç¾æ‰“å¡',icon:'fa-solid fa-camera',bgClass:'bg-rose-400',view:'photo'},
{id:9,name:'å³æ™‚æ•‘å‘½',icon:'fa-solid fa-comment-medical',bgClass:'bg-emerald-400',view:'japanese'}
];
const hotels = [{name:'éŒ¦ç³¸ç”º Sumida City',days:'Day 1-2',link:'#'},{name:'Megu Fuji 2021',days:'Day 3-4',link:'#'},{name:'DOMO é£¯åº—',days:'Day 5-7',link:'#'}];
const suggestedTickets = [{name:'æ±Ÿä¹‹é›»ä¸€æ—¥åˆ¸',reason:'è¡Œç¨‹åŒ…å«éŒå€‰',link:'#'},{name:'å¯Œå£«å›éŠè™Ÿ',reason:'å‰å¾€æ²³å£æ¹–',link:'#'}];
return { currentView, homeBannerImg, apps, getPageTitle, countdownPos, startDrag, daysUntilTrip, searchQuery, doGoogleSearch, tripDays, selectedDayIndex, currentDayItinerary, getIconByCategory, getMapLink, openAddModal, showModal, editForm, saveItem, deleteItem, editItem, moneyTab, moneyMode, users, currentUserId, selectMoneyUser, getUserById, userPersonalTotal, personalExpenses, groupExpenses, settlements, openExpenseModal, showExpenseModal, newExpense, addExpense, deleteExpense, exchangeRate, prepTab, prepMode, selectPrepUser, prepUser, currentPrepList, addPrepItem, getProgress, hotelTab, hotels, flightMode, currentFlightUser, foodLoc, shopCat, photoArea, getCurrentList, openAddCommonModal, showCommonModal, newCommon, saveCommonItem, isEditing, processCommonImageUpload, editCommonItem, deleteCommonItem, tokyoWeather, kamakuraWeather, fujiWeather, sakuraStatus, getClothingAdvice, showSyncModal, syncMsg:ref(''), downloadBackup, loadBackup, saveAsHtml, showTicketModal, openTicketModal, suggestedTickets, showCamera, openCamera, closeCamera, videoElement, showLightbox, openImage, currentZoomImg, avatarInput, triggerAvatarUpload, processAvatarUpload, commonImageInput, handleImgError, japanesePhrases, speak };
}
}).mount('#app');
</script>
</body>
</html>
